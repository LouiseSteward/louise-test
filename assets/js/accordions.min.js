var accordionHeads="#content .subheadline, #content "+settings[settings.site.output].accordion.level,defaultAccordionHead="#content .subheadline, #content "+settings[settings.site.output].accordion.level,autoCloseAccordionSections=settings[settings.site.output].accordion.autoClose;function ebAccordionInit(){"use strict";var e,t=document.body.getAttribute("data-accordion-page");t&&"none"===t&&(e=!0);var o=document.querySelectorAll(accordionHeads),t=!1;return o&&0!==o.length||(t=!0),-1===navigator.userAgent.indexOf("Opera Mini")&&"undefined"!==document.querySelectorAll&&"undefined"!==window.addEventListener&&!!Array.prototype.forEach&&!e&&!t}function ebAccordionPageSetting(){"use strict";return document.body.getAttribute("data-accordion-page")}function ebAccordionDefaultAccordionHeadID(){"use strict";var e;return e=""!==defaultAccordionHead?(e=document.querySelector(defaultAccordionHead).id)||"defaultAccordionSection":e}function ebAccordionSetUpSections(e){"use strict";var c;document.querySelector(accordionHeads)&&((c=document.querySelector("#content")).setAttribute("role","tablist"),e.forEach(function(e){var t=document.createElement("section");t.setAttribute("role","tabpanel"),t.setAttribute("aria-labelledby",e.id),t.setAttribute("data-accordion-container",e.id),c.insertBefore(t,e);var o=document.createElement("header");o.appendChild(e);var n=document.createElement("a");n.href="#"+e.id,n.innerHTML=e.innerHTML,e.innerHTML=n.outerHTML,e.setAttribute("role","tab"),t.appendChild(o);o=document.createElement("div");o.setAttribute("data-container",!0),t.appendChild(o)}),ebAccordionFillSections(),1<e.length&&ebAccordionShowAllButton())}function ebAccordionFillSections(){"use strict";for(var e=document.getElementById("content").childNodes,t=[],o=0;o<e.length;o+=1)t.push(e[o]);var n=!1;t.forEach(function(e){e.nodeType!==Node.ELEMENT_NODE||"tabpanel"!==e.getAttribute("role")?n&&n.querySelector("[data-container]").appendChild(e):n=e})}function ebMoveThemeKeys(){var e=document.querySelectorAll(".theme-key");document.querySelectorAll(".theme-key a").forEach(function(e){var t=null===e.parentNode.nextElementSibling?e.closest("section").nextElementSibling.querySelector("h2"):e.closest("#content").querySelector(".subheadline, h2");void 0!==t&&t.appendChild(e)}),e.forEach(function(e){e.parentNode.removeChild(e)})}function ebAccordionHideThisSection(e){"use strict";e=document.querySelector('[role="tabpanel"][aria-labelledby="'+e+'"]');e.querySelector('[role="tab"]').setAttribute("data-accordion","closed"),e.querySelector("[data-container]").setAttribute("aria-expanded","false")}function ebAccordionHideAll(){"use strict";document.querySelectorAll('[role="tabpanel"]').forEach(function(e){e.querySelector('[role="tab"]').setAttribute("data-accordion","closed"),e.querySelector("[data-container]").setAttribute("aria-expanded","false")})}function ebAccordionShowAll(){"use strict";document.querySelectorAll('[role="tabpanel"]').forEach(function(e){e.querySelector('[role="tab"]').setAttribute("data-accordion","open"),e.querySelector("[data-container]").setAttribute("aria-expanded","true")}),"function"==typeof videoShow&&videoShow(document);var e=document.querySelectorAll("[data-srcset]");ebLazyLoadImages(e)}function ebAccordionHideAllExceptThisOne(t){"use strict";document.querySelectorAll('[role="tabpanel"]').forEach(function(e){e.getAttribute("aria-labelledby")!==t&&(e.querySelector('[role="tab"]').setAttribute("data-accordion","closed"),e.querySelector("[data-container]").setAttribute("aria-expanded","false"))})}function ebAccordionCheckParent(e){"use strict";if(!e)return!1;if(!e.parentNode)return!1;if("BODY"===e.tagName)return!1;e=e.parentNode;return e.getAttribute("data-accordion-container")?e.getAttribute("data-accordion-container"):ebAccordionCheckParent(e)}function ebAccordionFindSection(e){"use strict";return ebAccordionCheckParent(e)}function ebWhichTarget(e){"use strict";var t;return!!(t=e?(e=decodeURIComponent(e),document.getElementById(e)):(t=window.location.hash.replace("#",""),t=decodeURIComponent(t),document.getElementById(t)))&&t}function ebAccordionShow(e){"use strict";var t=ebWhichTarget(e);t&&((e=ebAccordionFindSection(t))||ebAccordionShowDefaultSection(),(t=document.querySelector('[aria-labelledby="'+e+'"]'))&&(t.querySelector('[role="tab"]').setAttribute("data-accordion","open"),t.querySelector("[data-container]").setAttribute("aria-expanded","true"),void 0!==(e=t.querySelectorAll("[data-src]")).innerHTML&&ebLazyLoadImages(e),t.querySelectorAll(".slides").forEach(function(e){var t=e.querySelector(".figure img");t&&t.addEventListener("load",function(){t.height>t.width&&e.querySelector("nav").classList.add("nav-slides-portrait")})}),"function"==typeof videoShow&&videoShow(t)))}function ebAccordionListenForAnchorClicks(e){"use strict";e=e?document.querySelectorAll(e):document.querySelectorAll("#content a");e.forEach(function(e){"_blank"!==e.target&&e.addEventListener("click",function(e){var t;if((e.stopPropagation(),!(e.metaKey||e.ctrlKey||e.shiftKey))&&("noopener"!==e.currentTarget.getAttribute("rel")&&e.currentTarget.hasAttribute("href"))){if(t=e.currentTarget.getAttribute("href").replace(/\?.+/,"").replace(/.*#/,""),"open"===e.currentTarget.parentNode.getAttribute("data-accordion"))return e.preventDefault(),void ebAccordionHideThisSection(t);ebAccordionShow(t=!e.currentTarget.parentNode.getAttribute("data-accordion")?ebAccordionFindSection(document.getElementById(t)):t),!0===autoCloseAccordionSections&&ebAccordionHideAllExceptThisOne(t)}})})}function ebAccordionListenForHeadingClicks(){"use strict";document.querySelectorAll("[data-accordion]").forEach(function(e){e.addEventListener("click",function(){event.target.querySelector("a").click()})})}function ebAccordionListenForNavClicks(){"use strict";document.querySelectorAll("#nav [href]").forEach(function(e){e.addEventListener("click",function(){var e=document.getElementById(event.target.hash.replace(/.*#/,""));e&&"closed"===e.getAttribute("data-accordion")&&e.querySelector("a").click()})})}function ebAccordionListenForHashChange(){"use strict";window.addEventListener("hashchange",function(e){e.preventDefault();var t=window.location.hash.replace(/\?.+/,""),t=decodeURIComponent(t),o=document.getElementById(t.replace(/.*#/,"")),e=o.getBoundingClientRect(),t=e.top>=-e.height&&e.left>=-e.width&&e.bottom<=e.height+window.innerHeight&&e.right<=e.width+window.innerWidth,e=o.getAttribute("data-accordion");t&&!e||("closed"!==e?(ebAccordionShow(e=ebAccordionFindSection(o)),!0===autoCloseAccordionSections&&ebAccordionHideAllExceptThisOne(e)):o.querySelector("a").click())})}function ebAccordionFilterRemove(e){"use strict";for(var t=document.querySelectorAll(".theme-legend-filter-button-active"),o=0;o<t.length;o+=1)t[o].classList.remove("theme-legend-filter-button-active");for(var n=document.querySelectorAll('section[role="tabpanel"]'),c=0;c<n.length;c+=1)n[c].style.display="block";if(e)return e()}function ebAccordionFilter(n,c){"use strict";n.classList.contains("theme-legend-filter-button-active")?ebAccordionFilterRemove():ebAccordionFilterRemove(function(){n.classList.add("theme-legend-filter-button-active");for(var e=document.querySelectorAll('section[role="tabpanel"]'),t="theme-key-"+c,o=0;o<e.length;o+=1)e[o].querySelector("a."+t)||(e[o].style.display="none")})}function ebAccordionFilterListenForFilterClicks(t,o){t.addEventListener("click",function(){ebAccordionFilter(t,o)}),t.addEventListener("keydown",function(e){"Enter"===e.key&&ebAccordionFilter(t,o)})}function ebAccordionFilterAddListeners(){"use strict";document.querySelectorAll("[data-theme-filter]").forEach(function(e){var t=e.getAttribute("data-theme-filter");ebAccordionFilterListenForFilterClicks(e,t)})}function ebAccordionFilterButtons(){"use strict";for(var e=document.querySelectorAll(".chapter .theme-legend li"),t=0;t<e.length;t+=1){var o=e[t].className.match(/\d+/),n="";(n=document.createElement("a")).classList.add("theme-legend-filter-button"),n.setAttribute("data-theme-filter",o),n.setAttribute("tabindex",0),e[t].insertAdjacentElement("afterbegin",n)}ebAccordionFilterAddListeners()}function ebAccordionShowDefaultSection(){"use strict";ebAccordionHideAllExceptThisOne(ebAccordionDefaultAccordionHeadID()),ebAccordionShow(ebAccordionDefaultAccordionHeadID())}function ebAccordionCloseAllButton(){"use strict";var e=document.querySelector(".accordion-show-all-button");e.innerHTML=locales[pageLanguage].accordion["close-all"],e.addEventListener("click",function(){ebAccordionHideAll(),ebAccordionShowAllButton()})}function ebAccordionShowAllButton(){"use strict";var e,t,o;document.querySelector(".accordion-show-all-button")?(e=document.querySelector(".accordion-show-all-button")).innerHTML=locales[pageLanguage].accordion["show-all"]:(t=document.querySelector(defaultAccordionHead))&&((o=document.createElement("div")).classList.add("accordion-show-all-button-wrapper"),t.insertAdjacentElement("beforebegin",o),(e=document.createElement("a")).classList.add("accordion-show-all-button"),e.innerHTML=locales[pageLanguage].accordion["show-all"],o.insertAdjacentElement("afterbegin",e)),(e instanceof Element||e instanceof HTMLDocument)&&e.addEventListener("click",function(){ebAccordionShowAll(),ebAccordionCloseAllButton()})}function ebAccordify(){"use strict";document.body.setAttribute("data-accordion-active","true");var e,t,o,n=document.querySelectorAll(accordionHeads);n&&(e=-1===document.querySelector("body").getAttribute("class").indexOf("chapter"),t=null===document.querySelector(accordionHeads),o=-1!==document.querySelector("body").getAttribute("class").indexOf("endmatter"),e||t||o||(ebAccordionSetUpSections(n),ebMoveThemeKeys(),searchTerm&&document.querySelectorAll("section[data-accordion-container]").forEach(function(e){var t,o=e.querySelectorAll("[data-markjs]").length;o&&((t=e.querySelector("header a")).innerHTML="<mark>"+t.innerHTML+"</mark>",(t=document.createElement("p")).innerHTML=o+' search results for "<mark>'+searchTerm+'</mark>"',e.querySelector("header").appendChild(t))}),window.location.hash?(ebAccordionHideAll(),ebAccordionShow()):ebAccordionShowDefaultSection()))}function ebExpand(){"use strict";"expand"===ebAccordionPageSetting()&&ebAccordionShowAll()}function ebLoadAccordion(){"use strict";ebAccordionInit()&&(ebAccordify(),ebExpand(),ebAccordionListenForAnchorClicks(),ebAccordionListenForHeadingClicks(),ebAccordionListenForNavClicks(),ebAccordionListenForHashChange(),ebAccordionFilterButtons())}function ebPrepareForAccordion(){"use strict";new MutationObserver(function(e){e.forEach(function(e){"attributes"===e.type&&"true"!==document.body.getAttribute("data-accordion-active")&&document.body.getAttribute("data-index-targets")&&document.body.getAttribute("data-ids-assigned")&&ebLoadAccordion()})}).observe(document.body,{attributes:!0})}window.onload=ebPrepareForAccordion();